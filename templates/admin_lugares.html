{% extends "base.html" %}

{% block title %}Panel de administración de lugares{% endblock %}
{% block header_title %}Administración por parte de los Fieros{% endblock %}

{% block content %}

<section class="admin-card">

  <div class="admin-card-header">
    <div>
      <h2>Administración de lugares</h2>
      <p class="admin-card-subtitle">
        Consulta, edita y elimina los lugares registrados.
      </p>
    </div>

    <a href="{{ url_for('add') }}" class="btn-primary">Agregar lugar</a>
  </div>

  <div class="admin-card-body">
    <div class="table-wrapper">
      <table class="table-admin">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Dirección</th>
            <th>Mapa URL</th>
            <th>Descripción</th>
            <th>Usuario ID</th>
            <th>Fecha registro</th>
            <th>Acciones</th>
          </tr>
        </thead>

        <tbody>
          {% for l in lugares %}
          <tr>
            <td>{{ l[0] }}</td>
            <td>{{ l[1] }}</td>
            <td>{{ l[2] }}</td>

            <td>
              {% if l[3] %}
                <a href="{{ l[3] }}" target="_blank" class="map-link">
                  Ver mapa
                </a>
              {% else %}
                <span class="muted">Sin mapa</span>
              {% endif %}
            </td>

            <td>{{ l[4] }}</td>
            <td>{{ l[5] }}</td>
            <td>{{ l[6] }}</td>

            <td class="actions">
              <a class="btn-link" href="{{ url_for('edit', lugar_id=l[0]) }}">
                Editar
              </a>

              <form method="POST"
                    action="{{ url_for('delete', lugar_id=l[0]) }}"
                    style="display:inline;"
                    onsubmit="return confirm('¿Eliminar este lugar?');">
                <button class="btn-delete" type="submit">Eliminar</button>
              </form>

              <a class="btn-link"
                 href="{{ url_for('admin_resenas', lugar_id=l[0]) }}">
                Reseñas
              </a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

</section>

{% endblock %}