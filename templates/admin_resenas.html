{% extends "base.html" %}
{% block title %}Administración de los Fieros{% endblock %}
{% block header_title %}Administración por parte de los Fieros{% endblock %}

{% block content %}

<section class="admin-card">
  <div class="admin-card-header">
    <div>
      <h2>Administrar reseñas</h2>
      <p class="admin-card-subtitle">
        Lugar: <strong>{{ lugar[1] }}</strong> (ID {{ lugar_id }})
      </p>
    </div>

    <div class="admin-card-actions">
      <a href="{{ url_for('formulario', lugar_id=lugar_id) }}" class="btn btn-primary">
        Agregar reseña
      </a>
      <a href="{{ url_for('admin_lugares') }}" class="btn btn-outline">
        ← Volver a lugares
      </a>
    </div>
  </div>

  <div class="admin-card-body">
    {% if resenas|length == 0 %}
      <p>No hay reseñas para este lugar.</p>
    {% else %}
      <div class="table-wrapper">
        <table class="table-admin">
          <thead>
            <tr>
              <th>ID reseña</th>
              <th>Usuario</th>
              <th>Estrellas</th>
              <th>Comentario</th>
              <th>Fecha</th>
              <th>Acción</th>
            </tr>
          </thead>
          <tbody>
            {% for r in resenas %}
            <tr>
              <td>{{ r[0] }}</td>
              <td>{{ r[1] }}</td>
              <td>{{ r[2] }}</td>
              <td>{{ r[3] }}</td>
              <td>{{ r[4] }}</td>
              <td>
                <form method="POST"
                      action="{{ url_for('admin_delete_resena', lugar_id=lugar_id, resena_id=r[0]) }}"
                      onsubmit="return confirm('¿Eliminar esta reseña?');"
                      style="display:inline;">
                  <button type="submit" class="btn-delete">Eliminar reseña</button>
                </form>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% endif %}
  </div>
</section>

{% endblock %}